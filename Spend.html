<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIU Spring 2026 Exam Clash Solver (Updated Names)</title>
    <style>
        :root {
            --uiu-orange: #f37021;
            --uiu-blue: #005696;
            --light-bg: #f4f6f9;
            --clash-bg: #ffebee;
            --clash-border: #d32f2f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--uiu-orange);
            padding-bottom: 15px;
        }

        h1 { margin: 0; color: var(--uiu-blue); }
        p { color: #666; margin-top: 5px; }

        /* Search Section */
        .search-box {
            position: relative;
            max-width: 600px;
            margin: 0 auto 30px auto;
            display: flex;
            gap: 10px;
        }

        input#courseSearch {
            width: 100%;
            padding: 12px 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 6px;
            outline: none;
            transition: border-color 0.3s;
        }

        input#courseSearch:focus { border-color: var(--uiu-blue); }

        /* Dropdown suggestions */
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 0 0 6px 6px;
            max-height: 250px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }

        .suggestion-item:hover { background-color: #f0f7ff; }
        .suggestion-item strong { color: var(--uiu-blue); }
        .shortcut-badge { 
            background: #eee; 
            font-size: 0.75em; 
            padding: 2px 6px; 
            border-radius: 4px; 
            color: #666;
        }

        /* Alert Box */
        #alert-box {
            background-color: #ffe6e6;
            color: #cc0000;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            display: none;
            border: 1px solid #ffcccc;
        }

        /* Routine Grid */
        .routine-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .routine-table th, .routine-table td {
            border: 1px solid #e0e0e0;
            padding: 12px;
            text-align: center;
            vertical-align: top;
        }

        .routine-table th {
            background-color: var(--uiu-blue);
            color: white;
            font-weight: 600;
        }

        .day-header {
            background-color: #f8f9fa;
            font-weight: bold;
            color: var(--uiu-orange);
            width: 80px;
        }

        /* Course Card in Grid */
        .added-course {
            background-color: #e3f2fd;
            border-left: 4px solid var(--uiu-blue);
            padding: 8px;
            margin-top: 5px;
            border-radius: 4px;
            font-size: 0.9em;
            text-align: left;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .added-course.clash {
            background-color: var(--clash-bg);
            border-left-color: var(--clash-border);
            color: #b71c1c;
        }

        .remove-btn {
            position: absolute;
            top: 2px;
            right: 5px;
            cursor: pointer;
            color: #999;
            font-size: 16px;
            font-weight: bold;
        }
        .remove-btn:hover { color: red; }
        
        .slot-time { font-size: 0.8em; color: #777; display: block; margin-bottom: 4px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>UIU Exam Routine Manager</h1>
        <p>Spring 2026 Template | CSE Dept.</p>
    </header>

    <div id="alert-box">⚠️ Exam Clash Detected! You have two exams at the same time.</div>

    <div class="search-box">
        <input type="text" id="courseSearch" placeholder="Type Shortcut (e.g. SPL, DSA 2) or Name..." oninput="filterCourses()">
        <div class="suggestions" id="suggestions"></div>
    </div>

    <table class="routine-table">
        <thead>
            <tr>
                <th>Day</th>
                <th>Slot T1<br><span class="slot-time">9:00 AM - 11:00 AM</span></th>
                <th>Slot T2<br><span class="slot-time">11:30 AM - 1:30 PM</span></th>
                <th>Slot T3<br><span class="slot-time">2:00 PM - 4:00 PM</span></th>
            </tr>
        </thead>
        <tbody id="routineBody">
            </tbody>
    </table>
</div>

<script>
    // DATA: With "keywords" added for shortcuts
    const rawRoutine = [
        // Day 1
        { day: 1, time: 1, codes: ["ENG 1011", "ENG 101"], name: "English I", keywords: ["eng 1"] },
        { day: 1, time: 1, codes: ["CSI 309", "CSE 4509"], name: "Operating Systems", keywords: ["os", "operating"] },
        { day: 1, time: 1, codes: ["IPE 401", "IPE 3401"], name: "Industrial Management", keywords: ["ipe"] },
        { day: 1, time: 1, codes: ["DS 4491"], name: "Data Science Elective", keywords: [] },
        { day: 1, time: 2, codes: ["ENG 1013", "ENG 103"], name: "English II", keywords: ["eng 2"] },
        { day: 1, time: 2, codes: ["DS 3885"], name: "DS Elective", keywords: [] },
        
        // --- CHANGED: Renamed to "Linear Algebra and Calculus" ---
        { day: 1, time: 3, codes: ["MATH 183", "MATH 2183", "MATH 2107"], name: "Linear Algebra and Calculus", keywords: ["linear", "diff", "math", "calculus"] },
        
        { day: 1, time: 3, codes: ["CSE 313", "CSE 3313"], name: "Computer Architecture", keywords: ["architecture", "ca"] },
        { day: 1, time: 3, codes: ["SOC 101", "SOC 2101", "SOC 2102"], name: "Society, Tech & Ethics", keywords: ["soc", "ethics"] },
        { day: 1, time: 3, codes: ["DS 4889", "CSE 4889"], name: "Machine Learning", keywords: ["ml", "machine"] },

        // Day 2
        { day: 2, time: 1, codes: ["CSI 421", "CSE 4621"], name: "Computer Graphics", keywords: ["graphics", "cg"] },
        { day: 2, time: 1, codes: ["CSI 221", "CSE 3521"], name: "Database Management Systems", keywords: ["dbms", "database"] },
        { day: 2, time: 2, codes: ["CSE 425", "CSE 4325"], name: "Microprocessor & Interfacing", keywords: ["micro", "mpi"] },
        
        // --- CHANGED: Renamed to "Fundamental Calculus" ---
        { day: 2, time: 2, codes: ["MATH 151", "MATH 1151"], name: "Fundamental Calculus", keywords: ["calculus", "calc 1", "fundamental"] },
        
        { day: 2, time: 3, codes: ["ACT 111", "ACT 2111"], name: "Financial Accounting", keywords: ["accounting", "act"] },
        { day: 2, time: 3, codes: ["STAT 205", "MATH 2205"], name: "Probability & Statistics", keywords: ["stat", "stats"] },

        // Day 3
        { day: 3, time: 1, codes: ["CSI 341", "CSE 3811"], name: "Computer Networks", keywords: ["networks", "cn"] },
        { day: 3, time: 1, codes: ["CSE 4451", "CSE 451"], name: "Human Computer Interaction", keywords: ["hci"] },
        { day: 3, time: 2, codes: ["CSI 219", "CSE 2213"], name: "Discrete Mathematics", keywords: ["discrete", "dm"] },
        { day: 3, time: 2, codes: ["CSE 469", "PMG 4101"], name: "Project Management", keywords: ["pmg", "project"] },
        { day: 3, time: 2, codes: ["TEC 2499"], name: "Tech Entrepreneurship", keywords: ["entrepreneurship"] },
        { day: 3, time: 3, codes: ["CSE 225", "CSE 1325"], name: "Digital Logic Design", keywords: ["dld", "logic"] },
        { day: 3, time: 3, codes: ["CSE 487", "CSE 4587"], name: "Cloud Computing", keywords: ["cloud"] },
        { day: 3, time: 3, codes: ["BIO 3105", "BIO 3107"], name: "Biology for Engineers", keywords: ["biology", "bio"] },

        // Day 4
        { day: 4, time: 1, codes: ["CSI 411", "CSE 4611"], name: "Compiler Design", keywords: ["compiler"] },
        { day: 4, time: 1, codes: ["CSI 483", "CSE 4883"], name: "Digital Image Processing", keywords: ["dip", "image"] },
        { day: 4, time: 2, codes: ["CSI 121", "CSE 1111"], name: "Structured Programming Language", keywords: ["spl", "c programming"] },
        { day: 4, time: 2, codes: ["CSI 217", "CSE 2215"], name: "Data Structure & Algorithms I", keywords: ["dsa 1", "dsa"] },
        { day: 4, time: 2, codes: ["DS 1501"], name: "Programming for Data Science", keywords: ["pds"] },
        { day: 4, time: 2, codes: ["DS 2251"], name: "DS Algo II (DS)", keywords: [] },
        { day: 4, time: 3, codes: ["CSE 323", "CSE 3711"], name: "System Analysis & Design", keywords: ["sad"] }, 
        { day: 4, time: 3, codes: ["DS 4523", "CSE 4893", "CSE 493"], name: "Bioinformatics / Simulation", keywords: ["simulation", "bio"] },
        { day: 4, time: 3, codes: ["DS 3101"], name: "Data Science Core", keywords: [] },

        // Day 5
        { day: 5, time: 1, codes: ["MATH 201", "MATH 2201", "MATH 1153"], name: "Coord. Geometry & Vector", keywords: ["vector", "math 2", "geometry"] },
        { day: 5, time: 1, codes: ["CSI 311", "CSE 3411"], name: "System Analysis & Design", keywords: ["sad"] },
        { day: 5, time: 1, codes: ["EEE 4261"], name: "EEE Elective", keywords: [] },
        { day: 5, time: 2, codes: ["CSI 227", "CSE 2217"], name: "Data Structure & Algorithms II", keywords: ["dsa 2", "algorithms"] },
        { day: 5, time: 2, codes: ["DS 1101"], name: "Fund. of Data Science", keywords: ["fds"] },
        { day: 5, time: 3, codes: ["CSI 321", "CSE 3421"], name: "Software Engineering", keywords: ["se", "software"] },

        // Day 6
        { day: 6, time: 1, codes: ["BDS 1201"], name: "Bangladesh Studies", keywords: ["bds"] },
        { day: 6, time: 1, codes: ["ECO 213", "ECO 4101"], name: "Economics", keywords: ["eco", "economics"] },
        { day: 6, time: 1, codes: ["DS 3521"], name: "Data Science DB", keywords: [] },
        { day: 6, time: 2, codes: ["CSI 211", "CSE 1115", "DS 1115"], name: "Object Oriented Programming", keywords: ["oop", "java"] },
        { day: 6, time: 2, codes: ["CSE 4783", "DS 4891"], name: "Data Mining / Elective", keywords: ["data mining"] },
        { day: 6, time: 3, codes: ["CSE 113", "EEE 2113"], name: "Electrical Circuits", keywords: ["circuits", "electrical"] },
        { day: 6, time: 3, codes: ["CSE 123", "EEE 2123"], name: "Electronics", keywords: ["electronics"] },
        { day: 6, time: 3, codes: ["CSE 4531"], name: "Computer Security", keywords: ["security", "cyber"] },
        { day: 6, time: 3, codes: ["CSE 481", "CSE 4181"], name: "Mobile App Development", keywords: ["mad", "android", "mobile"] },

        // Day 7
        { day: 7, time: 1, codes: ["CSE 4891", "CSE 491"], name: "Data Mining", keywords: ["mining"] },
        { day: 7, time: 1, codes: ["CSE 465", "CSE 4165"], name: "Web Programming", keywords: ["web", "internet"] },
        { day: 7, time: 2, codes: ["CSI 233", "CSE 2233"], name: "Theory of Computation", keywords: ["toc", "theory"] },
        { day: 7, time: 3, codes: ["PHY 2105", "PHY 105"], name: "Physics", keywords: ["physics", "phy"] },
        { day: 7, time: 3, codes: ["CSE 4495", "CSE 495"], name: "Software Testing & QA", keywords: ["qa", "testing"] },
        { day: 7, time: 3, codes: ["DS 3881"], name: "DS Elective", keywords: [] }
    ];

    // Initialize Global State
    let myCourses = [];

    // Initialize Grid
    function initGrid() {
        const tbody = document.getElementById('routineBody');
        tbody.innerHTML = '';
        for (let i = 1; i <= 7; i++) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="day-header">Day ${i}</td>
                <td id="d${i}-t1"></td>
                <td id="d${i}-t2"></td>
                <td id="d${i}-t3"></td>
            `;
            tbody.appendChild(row);
        }
    }

    // UPDATED Search Logic
    function filterCourses() {
        const input = document.getElementById('courseSearch').value.toLowerCase();
        const suggestionBox = document.getElementById('suggestions');
        suggestionBox.innerHTML = '';
        
        if (input.length < 2) {
            suggestionBox.style.display = 'none';
            return;
        }

        const matches = [];
        
        rawRoutine.forEach(item => {
            // Check Name, Course Codes, OR Keywords (Shortcuts)
            const nameMatch = item.name.toLowerCase().includes(input);
            const codeMatch = item.codes.some(c => c.toLowerCase().includes(input));
            const keywordMatch = item.keywords.some(k => k.toLowerCase() === input || k.toLowerCase().includes(input));
            
            if (nameMatch || codeMatch || keywordMatch) {
                matches.push({
                    displayName: `${item.name} (${item.codes[0]})`, 
                    shortcutMatch: keywordMatch,
                    data: item
                });
            }
        });

        if (matches.length > 0) {
            suggestionBox.style.display = 'block';
            matches.forEach(match => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                
                // Show label
                let html = `<span>${match.displayName}</span>`;
                // If it matched via shortcut, show which shortcut
                if(match.shortcutMatch) {
                   html += `<span class="shortcut-badge">Shortcut Found</span>`;
                }

                div.innerHTML = html;
                div.onclick = () => addCourse(match.data);
                suggestionBox.appendChild(div);
            });
        } else {
            suggestionBox.style.display = 'none';
        }
    }

    // Add Course Logic
    function addCourse(courseData) {
        // Prevent duplicate addition
        const isDuplicate = myCourses.some(c => c.name === courseData.name && c.codes[0] === courseData.codes[0]);
        if (isDuplicate) {
            alert("Course already added!");
            return;
        }

        // Add to list
        myCourses.push(courseData);
        
        // Clear search
        document.getElementById('courseSearch').value = '';
        document.getElementById('suggestions').style.display = 'none';
        
        // Render
        renderSchedule();
    }

    // Render & Clash Detection
    function renderSchedule() {
        // Clear all cells
        for (let d = 1; d <= 7; d++) {
            for (let t = 1; t <= 3; t++) {
                document.getElementById(`d${d}-t${t}`).innerHTML = '';
            }
        }

        let clashDetected = false;

        // Group courses by slot to find clashes
        const slotMap = {}; // Key: "d1-t1", Value: [course1, course2]

        myCourses.forEach(course => {
            const key = `d${course.day}-t${course.time}`;
            if (!slotMap[key]) slotMap[key] = [];
            slotMap[key].push(course);
        });

        // Loop through slots and render
        for (const [key, coursesInSlot] of Object.entries(slotMap)) {
            const cell = document.getElementById(key);
            const isClash = coursesInSlot.length > 1;
            
            if (isClash) clashDetected = true;

            coursesInSlot.forEach(course => {
                const div = document.createElement('div');
                div.className = `added-course ${isClash ? 'clash' : ''}`;
                div.innerHTML = `
                    <span class="remove-btn" onclick="removeCourse('${course.codes[0]}')">&times;</span>
                    <strong>${course.name}</strong><br>
                    <small>${course.codes.join('/')}</small>
                `;
                cell.appendChild(div);
            });
        }

        // Show/Hide Alert
        const alertBox = document.getElementById('alert-box');
        alertBox.style.display = clashDetected ? 'block' : 'none';
    }

    function removeCourse(primaryCode) {
        myCourses = myCourses.filter(c => c.codes[0] !== primaryCode);
        renderSchedule();
    }

    // Start
    initGrid();

    // Close suggestions on click outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.search-box')) {
            document.getElementById('suggestions').style.display = 'none';
        }
    });

</script>

</body>
</html>
